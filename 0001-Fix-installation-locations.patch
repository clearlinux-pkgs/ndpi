From c431554fa638f637fe06aa6eadaa2ed40e328107 Mon Sep 17 00:00:00 2001
From: Auke Kok <auke-jan.h.kok@intel.com>
Date: Thu, 28 Mar 2019 11:36:34 -0700
Subject: [PATCH] Fix installation locations.

---
 Makefile.am         | 2 +-
 example/Makefile.in | 2 +-
 src/lib/Makefile.in | 8 ++++----
 3 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/Makefile.am b/Makefile.am
index 37f0849..55adecc 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -1,7 +1,7 @@
 ACLOCAL_AMFLAGS = -I m4
 SUBDIRS = src/lib example tests
 
-pkgconfigdir = $(prefix)/libdata/pkgconfig
+pkgconfigdir = $(prefix)/lib64/pkgconfig
 pkgconfig_DATA = libndpi.pc
 
 EXTRA_DIST = autogen.sh
diff --git a/example/Makefile.in b/example/Makefile.in
index bf218f5..48140b2 100644
--- a/example/Makefile.in
+++ b/example/Makefile.in
@@ -3,7 +3,7 @@ CFLAGS=-g -I../src/include @CFLAGS@
 LIBNDPI=../src/lib/libndpi.a
 LDFLAGS=$(LIBNDPI) @PCAP_LIB@ -lpthread @LDFLAGS@
 OBJS=ndpiReader.o ndpi_util.o
-PREFIX?=/usr/local
+PREFIX?=@prefix@
 
 all: ndpiReader @DPDK_TARGET@
 
diff --git a/src/lib/Makefile.in b/src/lib/Makefile.in
index 0ffeb9d..ef4e732 100644
--- a/src/lib/Makefile.in
+++ b/src/lib/Makefile.in
@@ -10,8 +10,8 @@
 #
 # Installation directories
 #
-prefix     = /usr/local
-libdir     = ${prefix}/lib
+prefix     = @prefix@
+libdir     = ${prefix}/lib64
 includedir = ${prefix}/include/ndpi
 CC         = @CC@
 CFLAGS     += -fPIC -DPIC -I../include -Ithird_party/include -DNDPI_LIB_COMPILATION -O2 -g
@@ -61,7 +61,7 @@ distclean: clean
 install: $(NDPI_LIBS)
 	mkdir -p $(DESTDIR)$(libdir)
 	cp $(NDPI_LIBS) $(DESTDIR)$(libdir)/
-	ln -Ffs $(DESTDIR)$(libdir)/$(NDPI_LIB_SHARED) $(DESTDIR)$(libdir)/$(NDPI_LIB_SHARED_BASE)
-	ln -Ffs $(DESTDIR)$(libdir)/$(NDPI_LIB_SHARED) $(DESTDIR)$(libdir)/$(NDPI_LIB_SHARED_BASE).$(NDPI_VERSION_MAJOR)
+	ln -Ffs $(NDPI_LIB_SHARED) $(DESTDIR)$(libdir)/$(NDPI_LIB_SHARED_BASE)
+	ln -Ffs $(NDPI_LIB_SHARED) $(DESTDIR)$(libdir)/$(NDPI_LIB_SHARED_BASE).$(NDPI_VERSION_MAJOR)
 	mkdir -p $(DESTDIR)$(includedir)
 	cp ../include/*.h $(DESTDIR)$(includedir)
-- 
2.21.0

